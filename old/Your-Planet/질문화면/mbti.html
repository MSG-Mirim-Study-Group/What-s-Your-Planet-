<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
</head>
<body>
  <script>
    var i = localStorage.getItem("i");
    var e = localStorage.getItem("e");
    var s = localStorage.getItem("s");
    var n = localStorage.getItem("n");
    var f = localStorage.getItem("f");
    var t = localStorage.getItem("t");
    var p = localStorage.getItem("p");
    var j = localStorage.getItem("j");

    let mbti = "";
    let planet = "";

    if (i > e) {
      mbti += "i";
    } else {
      mbti += "e";
    }

    if (s > n) {
      mbti += "s";
    } else {
      mbti += "n";
    }

    if (f > t) {
      mbti += "f";
    } else {
      mbti += "t";
    }

    if (p > j) {
      mbti += "p";
    } else {
      mbti += "j";
    }

    console.log("결과 : " + mbti);


    switch (mbti) {
      case "infp":
        planet = "Earth";
        break;
      case "infj":
        planet = "Earth";
        break;
      case "intj":
        planet = "Pluto";
        break;
      case "intp":
        planet = "Neptune";
        break;
      case "isfp":
        planet = "Moon";
        break;
      case "isfj":
        planet = "Saturn";
        break;
      case "istp":
        planet = "Mercury";
        break;
      case "istj":
        planet = "Uranus";
        break;
      case "enfp":
        planet = "Sun";
        break;
      case "enfj":
        planet = "Sun";
        break;
      case "entj":
        planet = "Sun";
        break;
      case "entp":
        planet = "Venus";
        break;
      case "esfj":
        planet = "Jupiter";
        break;
      case "estj":
        planet = "Jupiter";
        break;
      case "esfp":
        planet = "Mars"
        break;
      case "estp":
        planet = "Mars"
        break;
    }
    console.log(planet)


    var xhr = new XMLHttpRequest(); // AJAX 요청 객체 생성

    xhr.open("POST", "server_.php", true); // 요청 설정
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); // POST 데이터 타입 설정

    xhr.onreadystatechange = function () {
      if (xhr.readyState === XMLHttpRequest.DONE) { // 요청 완료 시
        if (xhr.status === 200) { // 응답 상태 확인
          console.log(xhr.responseText); // 응답 데이터 출력
        } else {
          console.log("Request failed. Status:", xhr.status); // 요청 실패 시 오류 메시지 출력
        }
      }
    };

    var data = "planet=" + encodeURIComponent(planet); // 변수를 쿼리 문자열로 인코딩
    xhr.send(data); // AJAX 요청 전송


    switch (planet) {
      case "Earth":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Pluto":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Neptune":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Moon":
        window.location.href = "../결과화면/moon.html";
        break;
      case "Saturn":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Mercury":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Uranus":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Sun":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Venus":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Jupiter":
        window.location.href = "../결과화면/uranus.html";
        break;
      case "Mars":
        window.location.href = "../결과화면/uranus.html";
        break;
    }
  </script>
</body>
</html>